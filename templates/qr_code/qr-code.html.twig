{% extends 'base.html.twig' %}

{% block title %}Hello QrCodeController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    .title {text-align: center; color: #ffc107}
    #qr-code { width: 100%; height: 400px; display: flex; justify-content: center; align-items: center;}
</style>
<h1 class="title">Êtes-vous présent ?</h1>
<div id="qr-code"></div>

<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
<script type="text/javascript">

    var enteredContent = localStorage.getItem('enteredContent');
    console.log("Contenu récupéré : " + enteredContent);

    document.addEventListener("DOMContentLoaded", function() {
        let text = "Vous etes present ! " + enteredContent;

        function generateQRCode() {
            let qrcodeContainer = document.getElementById("qr-code");
            let qr = new QRCode(qrcodeContainer, {
                text: text,
                width: 250,
                height: 250
            });

        generateQRCode();
    });
</script>

{% endblock %}
